<h1>Weather Forecast</h1>

<% if flash[:alert] %>
  <div class="alert alert-danger"><%= flash[:alert] %></div>
<% end %>
<div id="loading" style="display: none;">
  </div>

<% if @address %>
  <p>Location: <%= @address %></p>
<% end %>

<% if @cache_used %>
    <p><b>Data retrieved from cache.</b></p>
    <% if @forecast %>
        <p>Current Temperature: <%= @forecast["current_temp"] %> K</p>
        <% if @forecast["high"] && @forecast["low"] %>
        <p>High: <%= @forecast["high"] %> K, Low: <%= @forecast["low"] %> K</p>
        <% end %>
    <% else %>
        <p>Unable to retrieve weather data.</p>
    <% end %>
  <% else %>
    <% if @forecast %>
        <p>Current Temperature: <%= @forecast[:current_temp] %> K</p>
        <% if @forecast[:high] && @forecast[:low] %>
        <p>High: <%= @forecast[:high] %> K, Low: <%= @forecast[:low] %> K</p>
        <% end %>
    <% else %>
        <p>Unable to retrieve weather data.</p>
    <% end %>
  <% end %>


<form action="/" id="forecast-form">
  <div class="form-group">
    <label for="address">Enter Address:</label>
    <input type="text" class="form-control" id="address" name="address">
  </div>
  <button type="submit" class="btn btn-primary">Get Forecast</button>
</form>
